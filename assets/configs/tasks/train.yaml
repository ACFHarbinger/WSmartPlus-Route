# @package _global_

# General Configuration
verbose: true
seed: 42
start: 0

# Environment
env:
  name: "vrpp"

# Training Settings
train:
  train_data_size: 1280
  val_data_size: 128
  train_time: true
  eval_time_days: 7
  data_distribution: "gamma1"
  load_dataset: "time"
  n_epochs: 100
  batch_size: 128
  eval_batch_size: 128
  log_step: 10
  logs_dir: "logs/output"
  model_weights_path: "model_weights"
  persistent_workers: true
  pin_memory: true
  reload_dataloaders_every_n_epochs: 0

# Data Configuration
data:
  dataset_size: 1280
  data_distributions: ["gamma1"]

# Optimizer Settings
optim:
  optimizer: "rmsprop"
  lr: 0.0001
  lr_decay: 1.0
  lr_scheduler: "lambda"

# RL / Algorithm Settings
rl:
  algorithm: "adaptive_imitation"
  baseline: "exponential"
  bl_alpha: 0.05
  exp_beta: 0.8
  max_grad_norm: 1.0
  gamma: 1.0

  # Algorithm-specific configurations
  ppo:
    epochs: 7
    eps_clip: 0.2

  imitation:
    mode: "hgs_alns"
    loss_fn: "nll"

  adaptive_imitation:
    il_weight: 1.0
    il_decay: 0.95
    patience: 5
    threshold: 0.05
    decay_step: 1
    epsilon: 0.00001

# Model Settings
model:
  name: "am"
  encoder_type: "gat"
  policy_config: "assets/configs/lookahead_hgs.yaml"

# Must-Go Selection Strategy
# Determines which bins must be collected during training
# Options: last_minute, regular, lookahead, revenue, service_level, manager, combined, null
must_go:
  strategy: "lookahead"
  # LastMinute/Manager threshold
  threshold: 0.7 # Fill level threshold (0-1) / must_go probability threshold for manager
  # Regular parameters
  frequency: 3 # Collection frequency in days
  # ServiceLevel parameters
  confidence_factor: 1.0 # Standard deviations for statistical prediction
  # Revenue parameters
  revenue_kg: 1.0 # Revenue per kg
  bin_capacity: 1.0 # Bin capacity
  revenue_threshold: 0.0 # Minimum revenue threshold
  # Common parameters
  max_fill: 1.0 # Overflow threshold
  # Manager (neural network) parameters - used when strategy: "manager"
  hidden_dim: 128 # Manager network hidden dimension
  lstm_hidden: 64 # LSTM hidden dimension for temporal encoding
  history_length: 10 # Number of timesteps in waste history
  critical_threshold: 0.9 # Fill level considered critical
  manager_weights: null # Path to pre-trained manager weights (optional)
  device: "cuda" # Device for manager computation

# Global flags
wandb_mode: "disabled"
